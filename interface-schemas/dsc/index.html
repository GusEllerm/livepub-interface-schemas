<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="author" content="Augustus Ellerm">
<title>DSC Vocabulary</title>
<base href="./">
<style>
body { font-family: sans-serif; max-width: 50rem; margin: 2rem auto; padding: 0 1rem; }
h1 { color: #2c3e50; }
h2 { color: #34495e; border-bottom: 1px solid #ddd; padding-bottom: 0.3rem; margin-top: 2rem; }
h3 { color: #555; font-size: 1.1rem; margin-top: 1.5rem; }
code { background: #f4f4f4; padding: 0.2rem 0.4rem; border-radius: 3px; }
figure { margin: 1.5rem 0; }
figure img { max-width: 100%; height: auto; border: 1px solid #eee; border-radius: 6px; }
figcaption { font-size: 0.9rem; color: #666; margin-top: 0.5rem; }
table { width: 100%; border-collapse: collapse; margin: 1rem 0; }
th, td { border: 1px solid #ddd; padding: 0.5rem 0.7rem; vertical-align: top; text-align: left; }
th { background: #f8f8f8; }
tbody tr:nth-child(even) { background: #fcfcfc; }
td ul { margin: 0.3rem 0 0.3rem 1.1rem; padding: 0; }
footer { margin-top: 3rem; padding-top: 1rem; border-top: 1px solid #ddd; color: #666; }
</style>
</head>
<body>
<h1>Distributed Step Crate (DSC)</h1>
<p>This page documents the DSC vocabulary and related artifacts.</p>
<p><strong>Profile:</strong> <a href="#profile-1.0">DSC Profile v1.0</a></p>
<ul>
  <li><a href="https://w3id.org/livepublication/interface-schemas/dsc/terms.ttl">Vocabulary (Turtle)</a></li>
  <li><a href="https://w3id.org/livepublication/interface-schemas/dsc/shapes.ttl">SHACL Shapes</a></li>
  <li><a href="https://w3id.org/livepublication/interface-schemas/dsc/contexts/v1.jsonld">JSON-LD Context v1</a></li>
</ul>

<hr>

<a id="profile-1.0"></a>
<h2>Distributed Step Crate Profile (DSC) â€” v1.0</h2>
<figure>
  <img src="assets/Distributed_Step_Crate_Entity_Graph.png" alt="Distributed Step Crate entity graph showing core entities and relationships.">
  <figcaption>Distributed Step Crate entity graph.</figcaption>
</figure>
<p><strong>Profile identifier:</strong> <a href="https://w3id.org/livepublication/interface-schemas/dsc/index.html#profile-1.0">https://w3id.org/livepublication/interface-schemas/dsc/index.html#profile-1.0</a></p>
<p><strong>Status:</strong> Draft (under review)</p>
<p>
  This profile is currently a draft specification and may change. Do not rely on it for
  production validation without pinning to a specific release/commit. When finalised, this
  profile will be versioned and accompanied by a tagged release and Zenodo archive.
</p>
<!-- <p><strong>Stabilisation plan</strong></p>
<ul>
  <li>Finalise core requirements and align with validated examples.</li>
  <li>Tag a repository release for the profile and contexts.</li>
  <li>Archive the release via Zenodo.</li>
  <li>Update canonical DSC examples to declare <code>conformsTo</code> for this profile.</li>
</ul> -->
<p><strong>Conformance declaration:</strong> Conforming DSC crates MUST declare <code>conformsTo</code> on the Root Data Entity (<code>"./"</code>) including this profile URI.</p>
<p>In JSON-LD, <code>conformsTo</code> expands to <code>schema:conformsTo</code> using the DSC context; this page uses the compact <code>conformsTo</code> form for readability.</p>
<p>This is declared in <code>ro-crate-metadata.json</code> on the entity with <code>@id</code> <code>"./"</code>.</p>

<h3>Audience</h3>
<p>
  This profile is written for tool developers, workflow system developers, and metadata
  specialists implementing automated DSC generation. It is not intended for manual JSON-LD
  authoring by non-specialists.
</p>

<h3>About this profile</h3>
<p>
  The Distributed Step Crate (DSC) profile describes a single-step provenance fragment for
  distributed workflows. A DSC centers on an execution step that captures the tool run and
  its results, represented as a step descriptor that extends schema.org actions and workflow
  concepts used in the LivePublication interface schemas.
</p>
<p>
  DSCs capture execution inputs and outputs alongside runtime hardware descriptions and
  optional performance observations. The profile also accommodates optional access conditions,
  such as subscription or authentication requirements, when the execution is gated.
</p>
<p>
  DSCs are designed to be generated at runtime from a distributed compute interface. Multiple
  DSCs can later be compiled or linked into a higher-level crate that represents the full
  workflow execution, with each step aligned to an orchestrated workflow record.
</p>

<h3>Packaging guidance: Bundled vs Distributed</h3>
<ul>
  <li><strong>Distributed (recommended):</strong> one DSC per step/task, suited to Globus Compute and other distributed jobs.</li>
  <li><strong>Bundled:</strong> a single crate containing multiple step descriptions. This is currently in concept phase and is primarily concerned with reducing overhead of provenance in the system at runtime.</li>
  <li>LivePublication recommends distributed per-step crates, later compiled or linked into a parent workflow crate.</li>
</ul>

<h3>Conformance</h3>
<h4>Conformance summary</h4>
<table>
  <thead>
    <tr>
      <th>Conformance</th>
      <th>Required?</th>
      <th>Where</th>
      <th>Notes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Root Data Entity (<code>./</code>) declares <code>conformsTo</code> with the RO-Crate spec URI and DSC profile URI</td>
      <td>MUST</td>
      <td>Root Data Entity</td>
      <td>Use the RO-Crate version your crate targets (e.g., <code>https://w3id.org/ro/crate/1.1</code>).</td>
    </tr>
    <tr>
      <td>Root Data Entity references a DSC step descriptor (use <code>mainEntity</code>)</td>
      <td>MUST</td>
      <td>Root Data Entity</td>
      <td>DSC step descriptor is the primary provenance focus.</td>
    </tr>
    <tr>
      <td>Profile contextual entity describing the DSC profile</td>
      <td>SHOULD</td>
      <td>Contextual entities</td>
      <td>Use the profile URI as <code>@id</code>.</td>
    </tr>
    <tr>
      <td>Links to terms/shapes/contexts are discoverable from this page</td>
      <td>MUST</td>
      <td>DSC landing page</td>
      <td>See links at the top of this page and below.</td>
    </tr>
  </tbody>
</table>

<h4>Root Data Entity (Dataset, <code>@id</code>: <code>"./"</code>)</h4>
<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Required?</th>
      <th>Expected value range</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>conformsTo</code></td>
      <td>MUST</td>
      <td>URI</td>
      <td>Include the RO-Crate spec URI and the DSC profile URI.</td>
    </tr>
    <tr>
      <td><code>mainEntity</code></td>
      <td>MUST</td>
      <td><code>dsc:DistributedStep</code> (URI)</td>
      <td>Points to the DSC step descriptor.</td>
    </tr>
  </tbody>
</table>

<h4>Distributed Step Descriptor (<code>dsc:DistributedStep</code>)</h4>
<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Required?</th>
      <th>Expected value range</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>step</code></td>
      <td>MUST</td>
      <td><code>HowToStep</code> (URI)</td>
      <td>Links the step descriptor to the workflow step identity.</td>
    </tr>
    <tr>
      <td><code>hasPart</code></td>
      <td>MUST</td>
      <td><code>dpc:HardwareRuntime</code> (URI)</td>
      <td>Links to the runtime environment snapshot.</td>
    </tr>
    <tr>
      <td><code>object</code></td>
      <td>MAY</td>
      <td><code>File</code> or <code>PropertyValue</code> (URI)</td>
      <td>Inputs used by the step. At least one of <code>object</code> or <code>result</code> MUST be present (SHACL-enforced).</td>
    </tr>
    <tr>
      <td><code>result</code></td>
      <td>MAY</td>
      <td><code>File</code> or <code>PropertyValue</code> (URI)</td>
      <td>Outputs or results produced by the step. At least one of <code>object</code> or <code>result</code> MUST be present (SHACL-enforced).</td>
    </tr>
    <tr>
      <td><code>prov:startedAtTime</code></td>
      <td>MAY</td>
      <td>DateTime</td>
      <td>Start time (if recorded).</td>
    </tr>
    <tr>
      <td><code>prov:endedAtTime</code></td>
      <td>MAY</td>
      <td>DateTime</td>
      <td>End time (if recorded).</td>
    </tr>
  </tbody>
</table>

<h4>HowToStep (workflow step alignment)</h4>
<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Required?</th>
      <th>Expected value range</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>position</code></td>
      <td>MUST</td>
      <td>Integer</td>
      <td>Step order or index within the workflow.</td>
    </tr>
    <tr>
      <td><code>identifier</code></td>
      <td>SHOULD</td>
      <td>Text</td>
      <td>WMS task UUID used to align with orchestrated workflow records.</td>
    </tr>
    <tr>
      <td><code>sourceOrganization</code></td>
      <td>MAY</td>
      <td><code>Organization</code> (URI)</td>
      <td>Organization associated with the step.</td>
    </tr>
  </tbody>
</table>

<h4>HardwareRuntime (DPC)</h4>
<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Required?</th>
      <th>Expected value range</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>component</code></td>
      <td>MUST</td>
      <td><code>dpc:HardwareComponent</code> (URI)</td>
      <td>Hardware components captured in the runtime snapshot.</td>
    </tr>
  </tbody>
</table>

<h4>HardwareComponent (DPC)</h4>
<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Required?</th>
      <th>Expected value range</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>name</code></td>
      <td>MUST</td>
      <td>Text</td>
      <td>Human-readable component name (CPU, RAM, GPU, etc.).</td>
    </tr>
    <tr>
      <td><code>performance</code></td>
      <td>MAY</td>
      <td><code>Observation</code> (URI)</td>
      <td>Optional performance observations.</td>
    </tr>
  </tbody>
</table>

<h4>Observation (DPC)</h4>
<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Required?</th>
      <th>Expected value range</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>observationAbout</code></td>
      <td>MUST</td>
      <td><code>dpc:HardwareComponent</code> (URI)</td>
      <td>Links the observation to the component it measures.</td>
    </tr>
    <tr>
      <td><code>measurementTechnique</code></td>
      <td>MAY</td>
      <td>Text</td>
      <td>Measurement method or tool used.</td>
    </tr>
  </tbody>
</table>

<h3>Validated constraints vs guidance</h3>
<p><strong>Note:</strong> This profile includes normative MUST/SHOULD requirements that are not currently enforced by the SHACL shapes. The SHACL validation lists below describe the subset of constraints that are machine-validated.</p>
<p><strong>Validated by DSC SHACL only (<code>dsc/shapes.ttl</code>)</strong></p>
<ul>
  <li><code>DistributedStep</code> MUST have at least one of <code>object</code> or <code>result</code>.</li>
  <li><code>DistributedStep</code> MUST link to <code>HardwareRuntime</code> via <code>hasPart</code>.</li>
  <li><code>HowToStep</code> MUST have <code>position</code> (integer).</li>
  <li>If present, <code>prov:startedAtTime</code> and <code>prov:endedAtTime</code> MUST be <code>xsd:dateTime</code>.</li>
</ul>
<p><strong>Validated when combining DSC + DPC SHACL (recommended)</strong></p>
<ul>
  <li><code>HardwareRuntime</code> MUST link to one or more <code>HardwareComponent</code> via <code>component</code>.</li>
  <li><code>HardwareComponent</code> MUST have <code>name</code>.</li>
  <li><code>Observation</code> MUST link to the component via <code>observationAbout</code> if present.</li>
</ul>
<p><strong>Project conventions (guidance; not fully machine-validated)</strong></p>
<ul>
  <li>DSC step descriptor SHOULD use the recommended typing (CreateAction/HowTo/File/Schedule/ActionAccessSpecification + DistributedStep).</li>
  <li>WMS task UUID SHOULD be recorded in <code>HowToStep.identifier</code> for stable alignment.</li>
  <li>Use stable local <code>@id</code> patterns for components and observations (see naming guidance below).</li>
  <li>Prefer distributed per-step DSC crates, later linked into a parent workflow crate.</li>
  <li>Include a Profile contextual entity for this profile URI when possible.</li>
  <li>Schema.org optional entities such as <code>MediaSubscription</code> and <code>Organization</code> are not currently constrained by SHACL shapes.</li>
</ul>

<h3>Identifier and naming conventions</h3>
<ul>
  <li>Use stable local <code>@id</code> values with semantic meaning (e.g., <code>#cpu-0</code>, <code>#gpu-0</code>, <code>#ram-0</code>).</li>
  <li>For repeated observations, RECOMMENDED <code>@id</code> patterns include component id + metric + timestamp or sequence number.</li>
  <li>Example pattern: <code>#obs-cpu-0-util-2026-01-16T10:30Z</code>.</li>
  <li>Repeated observation entities represent distinct measurement events; include timestamps where available.</li>
</ul>

<h3>Recommended typing (project conventions)</h3>
<p>
  The DSC step descriptor SHOULD include schema.org action and workflow-related types used in
  this project: <code>CreateAction</code>, <code>HowTo</code>, <code>File</code>, <code>Schedule</code>,
  and <code>ActionAccessSpecification</code>, alongside <code>DistributedStep</code>. These are
  conventions in the examples and are not enforced by the DSC SHACL shapes.
</p>

<h3>Validation and artifacts</h3>
<p>
  DSC vocabulary and validation artifacts are available as:
  <a href="https://w3id.org/livepublication/interface-schemas/dsc/terms.ttl">terms.ttl</a>,
  <a href="https://w3id.org/livepublication/interface-schemas/dsc/shapes.ttl">shapes.ttl</a>, and
  <a href="https://w3id.org/livepublication/interface-schemas/contexts/v1.jsonld">contexts/v1.jsonld</a>,
  <a href="https://w3id.org/livepublication/interface-schemas/contexts/lp-dscdpc/v1.jsonld">contexts/lp-dscdpc/v1.jsonld</a>.
  SHACL shapes can validate core structural requirements for DSC crates, while some guidance
  (such as identifier patterns) is not enforceable by SHACL.
</p>

<h3>How to validate a DSC crate</h3>
<p>Use SHACL with the combined shape set (DSC + DPC) for full validation.</p>
<pre><code># Combined validation (recommended)
cat dsc/shapes.ttl dpc/shapes.ttl > combined-shapes.ttl
pyshacl -s combined-shapes.ttl -df json-ld -f human ro-crate-metadata.json
rm combined-shapes.ttl

# DSC-only validation (limited)
pyshacl -s dsc/shapes.ttl -df json-ld -f human ro-crate-metadata.json</code></pre>

<h3>Minimal example</h3>
<pre><code>{
  "@context": [
    "https://w3id.org/livepublication/interface-schemas/dsc/contexts/v1.jsonld",
    "https://w3id.org/ro/crate/1.1/context",
    "https://w3id.org/livepublication/interface-schemas/contexts/lp-dscdpc/v1.jsonld"
  ],
  "@graph": [
    {
      "@id": "./",
      "@type": "Dataset",
      "conformsTo": [
        { "@id": "https://w3id.org/ro/crate/1.1" },
        { "@id": "https://w3id.org/livepublication/interface-schemas/dsc/index.html#profile-1.0" }
      ],
      "mainEntity": { "@id": "#dsc-step" }
    },
    {
      "@id": "#dsc-step",
      "@type": [
        "CreateAction",
        "HowTo",
        "File",
        "Schedule",
        "ActionAccessSpecification",
        "DistributedStep"
      ],
      "name": "Example distributed step",
      "object": { "@id": "#input-file" },
      "result": { "@id": "#output-file" },
      "step": { "@id": "#wms-step-1" },
      "hasPart": { "@id": "#runtime-1" }
    },
    {
      "@id": "#wms-step-1",
      "@type": "HowToStep",
      "position": 1,
      "identifier": "b6f9f35e-8ee0-4b3a-a264-2e51a85d0c1e"
    },
    {
      "@id": "#runtime-1",
      "@type": "HardwareRuntime",
      "component": { "@id": "#cpu-0" }
    },
    {
      "@id": "#cpu-0",
      "@type": "HardwareComponent",
      "name": "CPU",
      "performance": { "@id": "#obs-cpu-0-util-2026-01-16T10:30Z" }
    },
    {
      "@id": "#obs-cpu-0-util-2026-01-16T10:30Z",
      "@type": "Observation",
      "measurementTechnique": "example only",
      "observationAbout": { "@id": "#cpu-0" },
      "value": 0.42
    },
    {
      "@id": "#input-file",
      "@type": "File",
      "name": "Input file",
      "encodingFormat": "text/plain"
    },
    {
      "@id": "#output-file",
      "@type": "File",
      "name": "Output file",
      "encodingFormat": "text/plain"
    }
  ]
}</code></pre>

<h3>Notes</h3>
<p>
  The DSC SHACL shapes in this repository target <code>dsc:DistributedStep</code> and define
  required links (e.g., <code>hasPart</code> to <code>HardwareRuntime</code>), but do not require the
  step entity to be typed as <code>CreateAction</code> or <code>HowTo</code>. The profile recommends
  those schema.org action types to preserve the thesis intent of modeling an explicit tool
  execution.
</p>
<p>
  The WMS task UUID is recorded in <code>HowToStep.identifier</code> to align with the SHACL
  expectation that <code>position</code> is an integer step order. This preserves a stable place
  for the WMS task identifier while keeping datatype validation intact.
</p>

<h3>How to cite / archive</h3>
<p>
  Repository: <a href="https://github.com/GusEllerm/livepub-interface-schemas">https://github.com/GusEllerm/livepub-interface-schemas</a><br>
  Zenodo DOI: <a href="https://doi.org/10.5281/zenodo.18250033">https://doi.org/10.5281/zenodo.18250033</a>
</p>

<h2>Vocabulary Terms</h2>

<h2 id="DistributedStep">dsc:DistributedStep</h2>
<p>
  A workflow step executed in a distributed environment. Represents a computational task 
  with inputs, outputs, execution host information, and provenance metadata.
</p>

<h3>Domain / Usage</h3>
<ul>
  <li>Type: <code>rdfs:Class</code></li>
  <li>Used to describe: Individual workflow steps in distributed WMS contexts</li>
  <li>May reference: <code>dpc:HardwareRuntime</code> to capture execution environment</li>
  <li>Appears in Distributed Step Crates to document workflow execution.</li>
</ul>

<footer>
  <p><small>Author: Augustus Ellerm | License: <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></small></p>
</footer>
</body>
</html>
